chrome.runtime.onInstalled.addListener((()=>{console.log("Day Wrapped Extension Installed")})),chrome.tabs.onUpdated.addListener(((e,o,r)=>{if("complete"===o.status&&r.url){const e=Date.now();chrome.storage.local.get(["shortTermMemory"],(o=>{var t;const n=o.shortTermMemory||[],s=n.filter((o=>e-o.time<=864e5));var l;s.push({url:r.url,time:e}),chrome.storage.local.set({shortTermMemory:s}),e-((null===(t=n[0])||void 0===t?void 0:t.time)||0)>=2592e6&&(l=n,chrome.storage.local.get(["longTermMemory"],(e=>{const o=function(e){const o=e.reduce(((e,o)=>{const r=new URL(o.url).hostname;return e[r]=(e[r]||0)+1,e}),{});return Object.entries(o).map((e=>{let[o,r]=e;return{domain:o,visits:r}}))}([...e.longTermMemory||[],...l]);chrome.storage.local.set({longTermMemory:o})})))}))}}));